spring:
  datasource:
    url: jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH
    username: sa
    password:
    driver-class-name: org.h2.Driver

  jpa:
    hibernate:
      ddl-auto: validate  # Flyway manages schema in tests too
    show-sql: true

  flyway:
    enabled: true
    locations: classpath:db/migration
    validate-on-migrate: true

  # Task execution configuration for tests - disable wait on shutdown to prevent hanging
  task:
    execution:
      shutdown:
        await-termination: false
    scheduling:
      shutdown:
        await-termination: false

# Minimal CSV config for test context - tests should mock/stub as needed
budget-analyzer:
  csv-config-map:
    test-bank:
      bank-name: "Test Bank"
      default-currency-iso-code: "USD"
      credit-header: "Credit"
      debit-header: "Debit"
      date-header: "Date"
      date-format: "MM/dd/uuuu"
      description-header: "Description"
